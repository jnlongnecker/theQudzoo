<template>
    <template if:true={buildInfo}>
        <div class="popup-background" if:true={deleting} onclick={cancelDelete}>
            <div class="popup" onclick={stopBubble}>
                <h1>Deleting {buildName}</h1>
                <p>
                    <img src={subtypeImg} />
                </p>
                <p>
                    You are about to delete this build. It's going to be gone
                    forever if you do this.
                </p>
                <div class="buttons">
                    <button class="cancel-delete" onclick={cancelDelete}>
                        Cancel
                    </button>
                    <button class="confirm-delete" onclick={confirmDelete}>
                        Delete
                    </button>
                </div>
            </div>
        </div>
        <a href={editorLink}>
            <div class={cardClass}>
                <div class="header">
                    <button onclick={copyCode} class="copy-code" if:true={copyable}>
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <path d={usePath}>
                            </path>
                        </svg>
                    </button>
                    <h1>{buildName} by {displayName}</h1>
                    <button class="delete" onclick={promptDelete} if:true={deletable}>
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                            <title>Delete Build</title>
                            <path
                                d="M9 19c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 1v10zm4 0c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 1v10zm4 0c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 1v10zm5-17v2h-20v-2h5.711c.9 0 1.631-1.099 1.631-2h5.315c0 .901.73 2 1.631 2h5.712zm-3 4v16h-14v-16h-2v18h18v-18h-2z">
                            </path>
                        </svg>
                    </button>
                </div>
                <div class="grid">
                    <div class="attributes">
                        <fieldset>
                            <legend>Attributes</legend>
                            <ul>
                                <template for:each={attributes} for:item="attribute">
                                    <li class={attribute.class} key={attribute.class}>
                                        <span>{attribute.name}</span>
                                        <span>{attribute.value}</span>
                                    </li>
                                </template>
                            </ul>
                        </fieldset>
                    </div>
                    <div class="char-info">
                        <img src={subtypeImg} />
                        <p>{subtypeName}</p>
                        <p class="char-name">{characterName}</p>
                    </div>
                    <div class="mutations">
                        <fieldset>
                            <legend>{bonus}</legend>
                            <ul>
                                <template for:each={mutations} for:item="mutation">
                                    <li key={mutation.value}>
                                        <span>{mutation.value}</span>
                                    </li>
                                </template>
                            </ul>
                        </fieldset>
                    </div>
                </div>
            </div>
        </a>
    </template>
</template>