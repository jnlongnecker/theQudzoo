<template>

    <section class="container">
        <div class="builder-app">
            <div class="tabs">
                <button selected onclick={tabSwitch}>Mutants</button>
                <button onclick={tabSwitch}>True Kin</button>
            </div>
            <section class="builder">
                <template if:true={mutantSelected}>
                    <build-mutant-builder build={sanitisedBuild} onbuildupdated={calculateBuildCode}>
                        <section class={popupClass} onclick={saveCancel}>
                            <div class="save-customization" onclick={stopProp}>
                                <h2>:finalize build details:</h2>
                                <build-card mode="static" build={currBuild}></build-card>
                                <form>
                                    <label class="major-label">:build name:</label>
                                    <input class="name-input" value={buildName} onchange={updateBuildName} />
                                    <label class="major-label">:build accessibility:</label>
                                    <div class="privacy">
                                        <label>private</label>
                                        <span class="switch">
                                            <input type="checkbox" checked={isPublic} onclick={updateAccessibility} />
                                            <span class="slider-dot"></span>
                                        </span>
                                        <label>public</label>
                                    </div>
                                    <div class="btns">
                                        <input-button size="large" variant="toughness" if:true={saveRequested}
                                            onclick={saveCancel}>Cancel</input-button>
                                        <input-button size="large" variant="willpower" if:true={isSaveable}
                                            onclick={saveBuild}>Save</input-button>
                                    </div>
                                </form>
                            </div>
                        </section>
                    </build-mutant-builder>
                </template>
                <template if:true={truekinSelected}>
                    <build-truekin-builder build={sanitisedBuild} onbuildupdated={calculateBuildCode}>
                        <section class={popupClass} onclick={saveCancel}>
                            <div class="save-customization" onclick={stopProp}>
                                <h2>:finalize build details:</h2>
                                <build-card mode="static" build={currBuild}></build-card>
                                <form>
                                    <label class="major-label">:build name:</label>
                                    <input class="name-input" value={buildName} onchange={updateBuildName} />
                                    <label class="major-label">:build accessibility:</label>
                                    <div class="privacy">
                                        <label>private</label>
                                        <span class="switch">
                                            <input type="checkbox" checked={isPublic} onclick={updateAccessibility} />
                                            <span class="slider-dot"></span>
                                        </span>
                                        <label>public</label>
                                    </div>
                                    <div class="btns">
                                        <input-button size="large" variant="toughness" if:true={saveRequested}
                                            onclick={saveCancel}>Cancel</input-button>
                                        <input-button size="large" variant="willpower" if:true={isSaveable}
                                            onclick={saveBuild}>Save</input-button>
                                    </div>
                                </form>
                            </div>
                        </section>
                    </build-truekin-builder>
                </template>
            </section>
        </div>
        <section class="code">
            <div class="build-action">
                <h2 class="no-mobile">:copy build code:</h2>
                <button class="x-btn" if:false={codeAvailable} onclick={copyCode}>
                    <input-icon variant="cross" padding="x-large" title={btnTitle}>
                    </input-icon>
                </button>
                <button onclick={copyCode} if:true={codeAvailable}>
                    <input-icon variant="clipboard" flipvariant="check" padding="x-large"></input-icon>
                </button>
            </div>

            <div class="build-action">
                <h2 class="no-mobile">:save build:</h2>
                <button class="x-btn" if:false={isSaveable}>
                    <input-icon variant="cross" padding="x-large" title={btnTitle}>
                    </input-icon>
                </button>
                <button onclick={saveClick} if:true={isSaveable}>
                    <input-icon variant="save" padding="x-large"></input-icon>
                </button>
            </div>

            <div class="build-action">
                <h2>:character name:</h2>
                <input class="name-input" onchange={updateName} />
            </div>
        </section>
    </section>
</template>