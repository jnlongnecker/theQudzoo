<template>
    <c-sugar-injector></c-sugar-injector>
    <template if:true={buildInfo}>
        <c-popup show={deleting} onclose={cancelDelete}>
            <span slot="header">Deleting {buildName}</span>
            <p>
                <img src={subtypeImg} />
            </p>
            <p>
                You are about to delete this build. It's going to be gone
                forever if you do this.
            </p>
            <input-button slot="input" size="thin large" variant="intelligence" onclick={cancelDelete}>
                Cancel
            </input-button>
            <input-button slot="input" size="thin large" variant="toughness" onclick={confirmDelete}>
                Delete
            </input-button>
        </c-popup>
        <a href={editorLink}>
            <div class={cardClass}>
                <div class="header">
                    <button onclick={copyCode} class="copy-code" if:true={copyable}>
                        <input-icon variant="clipboard" flipvariant="check" title="Copy Build Code"
                            padding="large"></input-icon>
                    </button>
                    <span if:false={copyable}></span>
                    <h1>{buildName}<span if:true={hasOwner}> by <span class="name">{displayName}</span></span></h1>
                    <button class="delete" onclick={promptRightButtonClick} if:true={copyable}>
                        <input-icon if:true={deletable} variant="delete" title="Delete Build"
                            padding="large"></input-icon>
                        <input-icon if:true={onlyCopyable} variant="puzzle" title="Remix Build"
                            padding="large"></input-icon>
                    </button>
                </div>
                <div class="grid">
                    <div class="attributes">
                        <fieldset>
                            <legend>Attributes</legend>
                            <ul>
                                <template for:each={attributes} for:item="attribute">
                                    <li class={attribute.class} key={attribute.class}>
                                        <span>{attribute.name}</span>
                                        <span>{attribute.value}</span>
                                    </li>
                                </template>
                            </ul>
                        </fieldset>
                    </div>
                    <div class="char-info">
                        <img src={subtypeImg} />
                        <p>{subtypeName}</p>
                        <p class="char-name">{characterName}</p>
                    </div>
                    <div class="mutations">
                        <fieldset>
                            <legend>{bonus}</legend>
                            <ul class="mutation-list" lwc:dom="manual"></ul>
                        </fieldset>
                    </div>
                </div>
                <div class="footer" if:true={copyable} onclick={stopBubble}>
                    <div class="footer-item updated" title="Last Updated">
                        <input-icon variant="refresh" size="big"></input-icon>
                        <span>{lastUpdated}</span>
                    </div>
                    <div class="footer-item likes" title="Likes">
                        <span class={likeClass}>
                            <input-icon variant="like" size="big" onclick={likeMyBuild}></input-icon>
                        </span>
                        <span>{likes}</span>
                    </div>
                    <div class="footer-item created" title="Created Date">
                        <input-icon variant="save" size="big"></input-icon>
                        <span>{created}</span>
                    </div>
                </div>
            </div>
        </a>
    </template>
</template>